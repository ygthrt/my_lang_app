# MyLang Web Tool

研究（卒論）で作った言語の処理系をWeb上で試せるツールです。[ここ](https://my-lang-app.vercel.app/)で実際に試すことができます。

研究成果を実際に動かせる形にすること、およびTypeScript/Reactの学習を目的として開発しました。
 
言語処理系としては素朴な実装ですが、OCamlで作った処理系を`js_of_ocaml`でブラウザ上で動かせる点が特徴です。

---
> [!WARNING]
> ## 注意事項
> - 現状まだ作りかけです。
> - 論文の内容と比べて、構文の違いや未対応の挙動、バグ等がまだあります。
> - TypeScript/Reactに触れてみたいという目的が主なので言語処理系の拡張よりWeb上の機能を優先して作っています。


---

## 言語仕様

言語仕様としてはTypeScriptのany型のような型と型安全なメタプログラミングの機構を持つ関数型言語です。

- 静的型検査をpassする型「？」を持ち、型注釈によって静的型検査の恩恵を受けることができます。
静的型検査後に、型「？」の部分に自動で実行時型検査の機構(〈type〉と表現される型キャスト)が挿入されます。
実行時にはこのキャスト込みのコードが評価されます。実行時の型エラーはキャストエラーとして式の評価前に検出されます。

- ブラケット(.<>.)で囲んだ部分はコードとして扱われ、コード内ではエスケープ(.~)を使用して実行結果をコードに埋め込むことができます。

詳しくは以下の論文を参照してください: Staged Gradual Typing(GPCE 2025)

[DOIリンク](https://dl.acm.org/doi/10.1145/3742876.3742880)

---

## 技術スタック
- 言語処理系: OCaml
- Webラッパー: TypeScript + React
- ビルドツール: Dune, js_of_ocaml
- デプロイ: Github Actions + Vercel

---

## 現状の機能
コードをエディター部分に書き、Evalボタンで実行できます。実行では以下のことが行われます。
- 字句構文解析
- 型検査
- 実行時型検査の機構の挿入
- 評価

実行が成功すると結果として型と実行結果が表示されます。

---

## 今後の予定 (TODO)
- Reactを使ってUI作成
  - 簡単なエディター機能
  - サンプルコードの追加
  - REPL機能
- 言語処理系の拡張
  - エラーメッセージ改善
  - 構文をocamlに合わせる

---

## 開発・ビルド方法
```bash

# 依存関係をインストール
opam install dune js_of_ocaml
cd web && npm install

# ビルド
npm run build

# Webで動作確認
npm run start

# 終了後
npm run clean
```

---

## バージョン

- OCaml: 5.3.0
- js_of_ocaml: 5.9.1
- Node.js: v22.14.0
- TypeScript: 5.8.x
- React: 19.1.x
- Vite: 7.1.x

